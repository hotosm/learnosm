---
layout: doc
title: 高度な編集
permalink: /jp/beginner/aerial-imagery/
lang: jp
category: beginner
---

高度な編集
=====

ポイント、ライン、シェイプの描き方や、JOSM上でのGPS移動記録の開き方、そしてOpenStreetMapのサーバからデータをダウンロードし、編集してアップロードするやり方など、JOSMの操作方法について、私たちはこれまで多くのページを使って紹介をしてきました。この章ではJOSMの機能についてより深く紹介します。ソフトウェアについて理解を深める事で、単なる編集ツールを超えたJOSMの使い方ができるように学習しましょう。ただし、この章でも、あまりにマニアックな内容は扱わず、これまでの章の内容から一歩進んだ内容に止めます。もしここまでに扱った操作方法で不明な点がある場合は、いったん読み進めるのを止め、もう少し操作練習をしてからにしてもよいでしょう。

JOSM機能ツアー
---------

  ![]({{site.baseurl}}/images/jp_beg_ch7_image07.png)

-  JOSMには多くの機能が実装されています。JOSMのソフトウェアには、主に地図が表示されています。JOSMの操作のほとんどはこの領域の上で行われます。OpenStreetMapデータの閲覧、編集、追加はこの箇所にて行います。
-  地図領域の右側にはいくつかのパネルが表示されており、それぞれ少しずつ異なった情報を表示しています。インストールしたばかりのJOSMでは、デフォルト設定として、レイヤー、プロパティ、選択、という名称のパネルが表示されていることでしょう。地図領域の中でOSMデータのポイントやライン、シェイプを選択すると、どのオブジェクトを選択しているかが"選択"パネルに表示されます。選択したオブジェクトに関連付けられた情報については"プロパティ"パネルに内容が表示されます。また、Authorパネルにはそのオブジェクトの作成者のユーザー名が表示されます。
-  JOSMの左側には、たくさんのボタンがツールバーとして配置されています。このツールバーの一番上に表示されているボタンは他のボタンとは異なり、選択するとマウス操作の挙動が変更されます。一番上の"選択"ボタンと二番目の"描画"ボタンに関しては、既に見覚えがあるかしれません。その他のツールは、地図の拡大縮小やオブジェクトの削除、既に描かれているラインと並列したラインを自動生成する機能などを提供します。
-  その下には、さらに多くのボタンが表示されています。それらのボタンは、クリックすることでJOSMの右側に表示されているパネル(プロパティ、選択、履歴など)の表示・非表示を変更することが可能です。

JOSMのレイヤー表示
-----------

-  GPSの活動記録ファイルを開くか、OpenStreetMapからデータをダウンロードしてみてください。ファイルを開く、ウォーキングペーパーを追加する、OpenStreetMapからデータをダウンロードする、などを行うと、JOSMの右側に表示されている"レイヤー"パネルの中に項目が追加されてゆくことがわかります。"レイヤー"パネルには以下のような表示がされています。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image05.png)

-  このリストに表示されている項目はそれぞれ、地図表示領域で読み込まれているデータを情報源ごとに並べたものです。上の例でゆくと、"データレイヤー2"はあなたがいま編集中のOpenStreetMapデータのレイヤーです。また、"Markers"レイヤーはGPSで記録したウェイポイントを表示しており、"30Juni2011.gpx"レイヤーはGPSの移動記録を表示しています。"WalkingPapers"レイヤーは、JOSMでウォーキングペーパーを読み込んだ際に作成されています。さらに、Bing画像レイヤーを追加して衛星写真を表示させることも可能です。(JOSMのトップメニューから"画像"→"BingSat"を選択)
-  レイヤーはそれぞれ、名称の横にある以下のボタンを押すことで、表示/非表示を切り替えることが可能です。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image03.png)

-  選択したレイヤーが地図表示領域のなかで非表示になります。表示/非表示ボタンをもう一度クリックすると、そのレイヤーがもう一度表示されます。
-  もしレイヤーを削除する場合、そのレイヤーを選択して削除ボタンを押してください。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image02.png)

-  最後に一つだけ注意してください。編集を行うことができるのは、JOSMでアクティブになっているレイヤーだけです。地図表示領域のデータを編集できない場合、適切なデータのあるレイヤーを選択していない可能性があります。GPSポイントやウォーキングペーパー、衛星写真など、編集できないデータはいくつか存在します。データの編集を実施できるのは、OpenStreetMapからダウンロードしたデータレイヤー、通称"データレイヤー1"と表示されるレイヤーだけです。
-  レイヤーをアクテイブにするには、対象のレイヤーをレイヤーパネルで選択し、アクティブボタンをクリックしてください。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image08.png)

OSMファイルを保存する
------------

-  OSMサーバからデータをダウンロードした後、データを保存してオフラインの状態で編集したいことがあるでしょう。その場合、データのアップロードは編集が終わった後、インターネットへの接続が回復してから行います。
-  OSMファイルを保存するには、まず、レイヤーパネルで保存したいレイヤーをアクティブにしてください。トップメニューから"ファイル"→"保存"をクリックして、保存先のフォルダとファイル名を指定します。また、データの保存はこのボタンをクリックすることでも可能です。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image00.png)

-  保存が完了したら、JOSMを終了しても問題ありません。保存したファイルを開くには、JOSMを起動させ、"ファイル"→"開く..."を選択してください。

追加の描画ツール
--------

-  JOSMに実装されているいくつかのツールを使うことで、ラインやシェイプを描画する際の手間を減らすことができます。JOSMのトップメニューの"ツール"をクリックしてください。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image01.png)

-  地図表示領域のなかのポイントやライン、シェイプを選択した後に、このメニューの中の機能を選択することで、その効果を適用できます。これらの中でも特によく使われるのは、以下の機能です。

-  ウェイを分割：1つのラインを2つのラインに分割します1つの道路の別の部分に対して異なった属性を付与する際に便利です。この機能を使うには、まずラインのなかで分割したい部分のポイントを選択し、そしてツールメニューから"ウェイを分割"を選択してください。
-  ウェイの結合：ウェイを分割、の逆の機能です。2つのラインを1つのラインに結合するには、2つのラインの間でポイントを1つ共有している必要があります。この機能を使うには、まず結合したい2つのラインを両方とも選択します。同時に複数のオブジェクトを選択するには、キーボードのShiftキーを押しながらクリックしてください。ラインを2つとも選択したら、ツールメニューから"ラインの結合"を選択します。
-  ウェイ方向転換：ラインの向きを変更できます。一方通行の道路を示すラインを描く際に、道路の向きを変更することが可能です。それ以外の場合、ラインの向きが影響することはありません。(訳注：正確にはいくつか存在しますが、レアケースです。海岸線の向きや崖の高低など)
-  ウェイの単純化：ラインの中に多くのポイントが含まれている場合に、ライン上のポイントを削除することでラインを単純化します。
-  ノードを円形に配列：シェイプを円形を描きたい際に使用します。まずはできるだけ円形になるように手書きでシェイプを描き、然る後にこの機能を選択します。シェイプ上のポイントが、できるだけ円形に近くなるように配置されます。
-  ノードを一直線に配列：選択したポイントを一直線上に配列します。
-  直行した形状：この機能は、建物を描く際に非常に重宝します。建物を描画した後、この機能によって建物の角を90°に変更することが可能です。

タグ
--

-  ポイントやライン、シェイプを描く際には、その位置が記録されます。しかし、それらが何をあらわしているのか、という情報はありません。どこにあるか、をあらわすことはできるのですが、そのままでは、何をあらわしているか、までは表現ができません。ここまでの紹介では、オブジェクトの意味をあらわすためにプリセットを使用してきました。
-  OpenStreetMapにおいて、オブジェクトが何をあらわしているかを表現するには、タグを使用します。タグとは、ラベルのようなものです。例えば、地図に四角形を描いたとします。これは単なる四角形でしかありません。しかし様々なタグをつけることで、その四角形が何をあらわしているのかを記載することができます。

-  この四角形は建物
-  建物の名前は"MenaraThamrin"
-  階数は16階建て

-  オブジェクトには、いくつでもタグを付けることができます。タグは、キー、そして値、と呼ばれる2つのテキストのペアで表されます。OpenStreetMapでは、上記のタグはこのように表記されます。:

-  building=yes
-  name=MenaraThamrin
-  building:levels=16

-  JOSMでオブジェクトを選択すると、そのオブジェクトにつけられたタグがすべて画面右側のプロパティパネルに表示されます。

  ![]({{site.baseurl}}/images/jp_beg_ch7_image04.png)

-  このパネルから、タグの追加、編集、削除が可能です。タグはほとんどの場合英語で書かれています。

キーボードショートカット
------------

-  JOSMで何か操作をしようとする際、そのたびに画面のあちこちを何度もクリックするのは手間がかかります。しかし幸運なことに、よく使用する機能にはキーボードショートカットが割り当てられています。以下はよく使われるショートカットと、その機能です。

-  -  s：選択ツールを選択
-  a：描画ツールを選択
-  z：拡大ツールを選択
-  +(プラス)：地図を拡大
-  -(マイナス)：地図を縮小
-  p：ウェイを分割
-  c：ウェイの結合
-  o：円形に配列
- l：一直線状に配列
- q：直行の形状(シェイプを四角形にします)

まとめ
---

この章で紹介したとおり、JOSMは数多くの機能が実装されている非常に強力な地図描画ツールです。これらの機能に慣れ親しむことで、OpenStreetMapへ情報を追加する技量が上達することでしょう。

最後の章ではJOSMの操作方法から離れ、OpenStreetMapのデータを使う幾つかのプロジェクトの紹介と、これからOSMについてさらに多くのことを知るための方法を紹介します。
