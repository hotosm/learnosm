---
layout: doc
title: تصحیح آفست تصاویر
permalink: /fa/josm/correcting-imagery-offset/
lang: fa
category: josm
---

آفست تصاویر
===============

> تاریخ بازبینی ۱۳۹۴/۰۶/۳۰  

ارائه‌دهندگان تصاویر معمولاْ کارهای بسیار خوبی در جهت ژئورفرنس کردن تصاویرشان انجام می‌دهند، اما گاهی اوقات تصاویر خارج از موقعیت قرار دارند. این موضوع به خصوص در مناطق تپه‌ای و کوهستانی صدق می‌کند که در آنها پهن کردن و کشیدن یک تصویر مسطح روی یک تکه از زمین دارای پستی و بلندی زیاد به سختی قابل انجام است. هنگامی که تصاویر را در JOSM بارگذاری می‌کنید، امکان اینکه ده متر یا بیشتر از موقعیت واقعی آن تفاوت داشته باشد وجود دارد. به این **افست تصویر** گفته می‌شود.  

در تصویر زیر توجه کنید که دو عکس هوایی جداگانه از هم به یکدیگر وصل شده و با هم ادغام شده اند. از آنجا که ژئورفرنس کردن يك فرآيند كامل نيست، تصاوير به طور كامل در تراز هم قرار ندارند. از این رو یکی یا هر دو آنها باید نادرست باشد.  

![Misaligned imagery][]

ما تقریباْ دو روش اصلی ساخت نقشه را یاد گرفته‌ایم - یکی از آنها استفاده از تصاویر هوایی برای شناسایی عوارض زمین است و دیگری استفاده از GPS برای ضبط مسیر و نقاط بین‌راهی و سپس افزودن آنها به OpenStreetMap است. مزایای تصویر هوایی بسیار روشن است. شما به عنوان نقشه‌کش قادر هستید کل تصویر را یکجا ببینید و جزئیات مختلف آنرا مشاهده کنید، و با در نظر گرفتن اطلاعات خود از منطقه، به راحتی جاده‌ها، ساختمانها، و نواحی را ردیابی کنید. یکی از مزیتهای کلیدی GPS نسبت به تصاویر این است که مانند آنها جابجایی تصویر را ندارند. GPS همیشه طول و عرض جغرافیایی صحیح را ارائه می‌دهد. تنها استثنا زمانی است که ساختمانهای بلند یا کوهها مانع رسیدن سیگنالهای ماهواره‌ای می‌شوند، اما در این مورد، خطا به آسانی تشخیص داده میشود. ردیابی‌های GPS در این تصویر را در مقایسه با لایه تصویر هوایی Bing زیر آن مشاهده کنید:  

![Aerial vs GPS][]

به خاطر دانسته‌های قبلی، واضح است که ردیابی GPS احتمالاْ دقیق است و تصویر زیر آن خارج از موقعیت است. بنابراین اکنون باید بپرسیم "اگر احتمالاْ تصاویر خارج از موقعیت قرار دارند، هنوز چگونه می‌توانیم از آنها استفاده کرده و نقشه‌های دقیق ایجاد کنیم؟"  

تصحیح افست تصاویر
-------------------------

پاسخ به سوال قبلی این است که ما می‌توانیم تصاویر را جابجا کنیم و با چیزهایی که می‌دانیم در مکان صحیح قرار دارد، مانند مسیرهای GPS، هماهنگ کنیم. اصلاح افست  تصاویر در JOSM آسان است.  

بهترین مرجع برای تنظیم تصاویر، مسیرهای GPSای هستند که جاده‌ها را دنبال میکنند. و هرچه مسیر GPS بیشتری به عنوان مرجع داشته باشید، دقیقتر می‌توانید تصاویر خود را تراز کنید. از آنجاییکه کاربران OpenStreetMap اغلب مسیرهای GPS خود را به پایگاه داده OSM آپلود می‌کنند، می‌توانیم آنها را دانلود کرده و از آنها برای ترازکردن تصاویر استفاده کنیم.  

- بر روی دکمه دانلود کلیک کنید. ![JOSM download button][]{: height="24px"}  

- کادر "Raw GPS Data" نزدیک بالای پنجره دانلود ![Download raw GPS data][]{: height="24px"} را علامت بزنید. منطقه خود را انتخاب کرده و روی "دانلود" کلیک کنید.  

- اینکار یک لایه اضافی حاوی مسیرهای GPS را برای JOSM دانلود می‌کند. بسته به اینکه چند مسیر توسط کاربران OSM آپلود شده باشد، ممکن است چندین مسیر (یا حتی بدون هرگونه مسیر) را مشاهده کنید:  

![Few GPS tracks from OSM][]

- یا ممکن است مسیرهای بسیاری را ببینید:  

![Many GPS tracks from OSM][]

- برای تنظیم یک لایه تصویری، بر روی دکمه "تنظیم افست تصویر" (Adjust imagery offset) در بالای JOSM کلیک کنید. ![Adjust imagery offset button][]{: height="24px"}  

- بدون توجه به کادری که ظاهر می‌شود، با استفاده از ماوس لایه تصاویر را جابجا کنید به طوری که به نحو صحیح با مسیر GPS تراز شود. مسیرهای GPS تا حد امکان باید به محاذات جاده‌های موجود در تصویر باشند. مشاهده می‌کنید که اعداد افست در کادر تغییر می‌کنند.  

![Adjust imagery offset][]

- اگر بخواهید، می‌توانید این تنظیمات افست را با وارد کردن یک نام نشانه و سپس کلیک بر روی OK ذخیره کنید. از این پس می‌توانید همین تنظیمات را با رفتن به Imagery ‣ Imagery offset و کلیک بر روی نام نشانه خود بطور خودکار تنظیم کنید.  
- اگر نمی‌خواهید افست را ذخیره کنید، به راحتی بدون وارد کردن نام نشانه روی OK کلیک کنید.  

اگر مسیر GPS در OpenStreetMap وجود نداشته باشند و شما GPS نداشته باشید، چه؟ بدون مسیرهای GPS، تراز کردن تصاویر بسیار سخت است. اگر یک ناحیه نسبتاْ خالی است (خیلی زیاد نقشه‌کشی نشده است)، بهتر است که به راحتی از تصاویر استفاده کنید و داده ها را بعداْ اصلاح کنید. بهتر است که نقشه یک منطقه ۲۰ یا ۳۰ متر افست داشته باشد تا اینکه هیچ نقشه‌ای اصلاْ نداشته باشد.  

اگر بتوانید طول و عرض جغرافیایی یک جسم را بر روی زمین بطور کامل شناسایی کنید، با انجام این مراحل می‌توانید اطمینان حاصل کنید که تصاویر به درستی قرار گرفته‌اند:  

1. شناسایی شی‌ای که موقعیتش را در تصاویر می‌دانید.  
2. روی عرض و طول جغرافیایی در گوشه پایین سمت چپ JOSM کلیک کنید. ![JOSM lat lon][]{: height="24px"}  
3. در کادر محاوره‌ای که باز می‌شود، عرض و طول جغرافیایی که می‌دانید و عدد کوچکی برای زوم، حدود پنج یا ده را وارد کنید.  
![JOSM lat lon dialogue][]
4. اینکار باعث می‌شود که مرکز نقشه در محل طول و عرض جغرافیایی قرار گرفته و زوم شود. اکنون می‌توانید تصاویر را همانطور که قبلاْ انجام دادید جابجا کنید تا ویژگی که می‌شناسید در موقعیت صحیح متمرکز شود.  

از سوی دیگر، اگر منطقه قبلاْ به طور گسترده نقشه‌کشی شده است، امیدواریم نقشه‌کش‌های قبلی اشیا را در مکان های صحیح خود کشیده باشند. در این مورد، می‌توانید تصاویر را به نقشه OSM تراز کنید، اما مراقب باشید! نقشه‌کشهای دیگر ممکن است آگاه به افست تصاویر نباشند و ممکن است هنگام نقشه‌کشی اشتباهاتی مرتکب شده باشند.  


پایگاه داده افست تصویری
---------------------------

حالا می‌دانید که چطور مراقب افست تصاویر باشید و آنها را تصحیح کنید، اما مشکل عمده دیگری در این روش وجود دارد که تابحال نادیده گرفته شده است. اگر هر کاربر OpenStreetMap تصاویر را به صورت متفاوتی تنظیم کند، هر کسی با زمینه‌های کمی متفاوت نقشه را می‌کشد.  

تصور کنید که شما نقشه یک شهر کوچک را می‌کشید و متوجه می‌شوید که تصاویر Bing پانزده متر به طرف شمال افست دارند. بنابراین تصاویر را تنظیم می‌کنید و سپس از آن برای کشیدن نقشه دقیق کل شهر استفاده می‌کنید. اما پس از آن یک نفر دیگر می‌خواهد چیزی را به نقشه اضافه کند، بنابراین داده‌ها را دانلود می‌کند و تصاویر Bing را بارگذاری می‌کند، اما در مورد افستی که شما کشف کرده‌اید چیزی نمی‌داند! او فکر می‌کند که یک چیزی اشتباه است و تمام اجسام شهر ۱۵ متر جابجا هستند و بنابراین شروع به جابجایی آنها می‌کند، که درست نیست! این می‌تواند برای داده‌های نقشه شهر فاجعه آمیز باشد.  

به همین دلیل مهم است که تمام کاربران از افست تصاویر مطلع باشند و همیشه باید قبل از نقشه‌کشی یک منطقه آنرا بررسی کنند. برای کمک به حل این مشکل، تعدادی آدم هوشمند یک پلاگین ایجاد کرده‌اند که به کاربران اجازه می‌دهد اطلاعات را در پایگاه داده ذخیره کرده و با دیگران به اشتراک بگذارند. بیایید ببینیم چگونه این کار می کند:  

- منوی تنظیمات JOSM باز کنید و روی زبانه پلاگین کلیک کنید. ![JOSM plugins tab][]{: height="24px"}  

- افزونه‌ای به نام "imagery_offset_db" را پیدا کنید و کادر کنار آنرا علامت بزنید.  

![Imagery_offset_db plugin][]

- روی OK کلیک کنید. برای تکمیل نصب افزونه باید JOSM را مجدداْ راه‌اندازی کنید.  

به همان شیوه‌ای که می‌توانید افستها را با نام نشانه ذخیره کنید، این افزونه نیز به شما اجازه می‌دهد که افستها را در یک پایگاه داده مرکزی ذخیره کنید و به افست‌هایی که سایر کاربران ایجاد کرده‌اند دسترسی داشته باشید. از این رو، اگر یک نقشه‌کش یک افست تصویری را در یک منطقه ایجاد کند، کاربران دیگر می‌توانند از همان جابجایی نقشه استفاده کنند.  

هنگام استفاده از لایه‌های تصویر هوایی، "همیشه" باید افست‌های موجود چک کنید و هنگامی که افست خود را ایجاد می‌کنید، "همیشه" باید آن را در این پایگاه داده ذخیره کنید.  


اضافه کردن افست تصویر از پایگاه داده
------------------------------------

وقتیکه یک لایه تصویر اضافه می‌کنید، افزونه جدید به شما هشدار می‌دهد که باید پایگاه داده تصاویر را برای یک افست موجود بررسی کنید. شما یک آیکون با علامت قرمز تعجب روی آن در بالای JOSM خواهید دید، مانند این:  

![Imagery offset notification][]

- بر روی دکمه کلیک کنید و افزونه با پایگاه داده ارتباط برقرار خواهد کرد تا ببیند آیا برای این منطقه افست‌هایی وجود دارد.  
- در اینجا ما داده‌های OSM و مسیرهای GPS را در کوتا، بالی، اندونزی دانلود کرده‌ایم. در این مورد، ما یک افست موجود پیدا کردیم. بر روی آن کلیک کنید تا به نقشه اعمال شود.  

![Offset in Kuta bali][]

- این باعث می‌شود که لایه تصویر جابجا شود. با این حال، هنگامی که افست شخص دیگری مانند این را اضافه می‌کنیم، باید با مقایسه با مسیرهای GPS بررسی کنیم که آیا معتبر است.  

![Comparing imagery offset from GPS tracks][]

- می‌توانیم ببینیم که لایه‌های تصویری در واقع ناهمتراز هستند. ما نمی‌خواهیم که سایر کاربران از این افست استفاده کنند، بنابراین باید آنرا به عنوان نادرست در پایگاه داده علامت‌گذاری کنیم. دوباره روی دکمه "Offsets" کلیک کنید (دیگر علامت تعجب قرمزی نخواهد داشت).  

![Offsets button][]

- این بار زمانی که کادر محاوره‌ای باز می‌شود، بر روی افست کلیک راست کرده و روی دکمه "Deprecate Offset" کلیک کنید.  

![Deprecate offset][]

- برای تأیید روی "بله" کلیک کنید.  
- شما باید یک دلیل برای مشکل‌دار دانستن این افست وارد کنید.  

![Deprecate reason][]


اضافه کردن تصاویر به پایگاه داده
------------------------------------

اکنون که ما این افست را به عنوان "مشکل‌دار" مشخص کردیم، باید یک افست صحیح به پایگاه داده اضافه کنیم.  

1. بر روی دکمه "تنظیم افست تصویر" کلیک کنید. ![Adjust imagery offset button][]{: height="24px"}  
2. تصاویر را مطابق با مسیرهای GPS تنظیم کنید. OK را کلیک کنید.  
3. حالا به ...Offset ‣ Store Imagery Offset بروید.  
![Store imagery offset][]
4. توضیحی برای افست در جعبه‌ای که باز می‌شود وارد کنید.  
![Offset description][]
5. روی OK کلیک کنید. افست شما در پایگاه داده ذخیره خواهد شد.  
6. حالا لایه GPS را پنهان کرده و به لایه داده OSM که در برابر تصاویر به درستی قرار گرفته نگاهی بیندازید.  

![Corrected imagery][]

وای نه! کسی این منطقه را با تصاویر ناتراز نقشه‌کشی کرده است، بنابراین این منطقه به درستی نقشه‌کشی نشده است. برای رفع این مشکل کمی زمان نیاز است.


وب سایت پایگاه داده افست تصویری
--------------------------------

در نهایت، برای کسب اطلاعات بیشتر در مورد پایگاه داده افست، می‌توانید از وب سایت (http://offsets.textual.ru/](http://offsets.textual.ru] بازدید کنید. این سایت تمامی آفست‌هایی را که در پایگاه داده آپلود شده را لیست می‌کند و همچنین دارای یک ویژگی نقشه بسیار جالب است که در آن محل افست‌ها را به صورت دیداری نشان می‌دهد، که می‌توانید در اینجا ببینید:  

![http://offsets.textual.ru/][]

> یک مورد دیگر که باید به خاطر بسپارید این است که افست تصاویر در همه فواصل یکسان نیست! این به ویژه در مناطقی که تپه و کوه زیادی دارد صادق است. بنابراین اگر افست تصاویر کمی متفاوت در مناطق مختلف به نظر می رسد، لازم است دوباره آن را جابجا کنید.  

خلاصه
--------

هنگامی که تازه در OpenStreetMap شروع به کار کرده‌اید، نیازی نیست در مورد اقست تصاویر زیاد نگران باشید. اما اگر ببینید که ویرایشهای نقشه‌کش دیگری نسبت به تصاویر ماهواره‌ای ناترازی زیادی دارند، همیشه قبل از شروع تغییر اشیاء آنها، در نظر داشته باشید که ممکن است افست تصاویر وجود داشته باشد. و اگر هنوز کاملاْ آماده برای کار با افستها نیستید، فقط به یاد داشته باشید که بهتر است یک منطقه نقشه‌ای با ۲۰ یا ۳۰ متر جابجایی داشته باشد تا اینکه اصلاْ هیچ نقشه‌ای نداشته باشد. اما در صورت امکان، به یاد داشته باشید که ممکن است افست تصویری رخ دهد و در صورت نیاز برای اصلاح آن از مراحل آموزش داده در این فصل استفاده کنید.


[Misaligned imagery]: /images/josm/misaligned-images.png
[Aerial vs GPS]: /images/josm/aerial-vs-gps.png
[JOSM download button]: /images/josm/josm-download-button.png
[Download raw GPS data]: /images/josm/raw-gps-data.png
[Few GPS tracks from OSM]: /images/josm/osm-gps-tracks-few.jpg
[Many GPS tracks from OSM]: /images/josm/osm-gps-tracks-many.jpg
[Adjust imagery offset button]: /images/josm/adjust-imagery-offset-button.png
[Adjust imagery offset]: /images/josm/adjust-imagery-offset.png
[JOSM lat lon]: /images/josm/josm-lat-lon.png
[JOSM lat lon dialogue]: /images/josm/josm-lat-lon-dialogue.png
[JOSM plugins tab]: /images/josm/josm-plugins-tab.png
[Imagery_offset_db plugin]: /images/josm/imagery-offset-db-plugin.png
[Imagery offset notification]: /images/josm/offset-exclamation.png
[Offset in Kuta bali]: /images/josm/offset-kuta-bali.png
[Comparing imagery offset from GPS tracks]: /images/josm/offset-compare-gps.png
[Offsets button]: /images/josm/offsets-button.png
[Deprecate offset]: /images/josm/deprecate-offset.png
[Deprecate reason]: /images/josm/deprecate-reason.png
[Store imagery offset]: /images/josm/store-imagery-offset.png
[Offset description]: /images/josm/offset-description.png
[Corrected imagery]: /images/josm/correctly-placed.png
[http://offsets.textual.ru/]: /images/josm/offset-website.png










