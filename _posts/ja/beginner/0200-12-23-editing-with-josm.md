---
layout: doc
title: JOSMによるOpenStreetMap編集
permalink: /ja/beginner/editing-with-josm/
lang: ja
category: beginner
---

JOSMによるOpenStreetMap編集
======================
これまでの章で紹介したことでOpenStreetMapの編集に必要なパーツはすべてカバーしました。
ここまでで学んだことは、地域を調査するためのGPSロガーとField Papersの使い方、そして、JOSMを使って、私たちの地図を構成しているポイント、ライン、シェイプデータの作成方法です。

この章ではもう一度JOSMの操作方法に戻って、これまでに紹介していなかった編集方法に目を向けてみましょう。

JOSMの編集レイヤー
---------------
これまでずっとJOSMを使い続けていたら気がついているかもしれませんが、JOSMには一度にいろいろなデータを追加することが可能です。例えばOSMデータをダウンロードして追加することもできますし、Bingの衛星画像、GPSの軌跡とウェイポイント、Field Papersの画像データなど、JOSMではそれらすべてを表示することができます。

気づいているかもしれませんが、JOSMにレイヤーを追加すると、画面右側のレイヤーパネルに項目が追加されています。どのようなデータを開いたかによって、レイヤーの表示は以下のように変わります。

![Layers panel][]

このリストにあるそれぞれの項目は、あなたがJOSMのマップウィンドウで開いているデータひとつひとつを示しています。この例では、"データレイヤー1"は私たちが編集中のOpenStreetMapデータをあらわします。"Field Papers"は、JOSMでField Papersを読み込んだ際に追加されるレイヤーです。

ここにBing衛星画像データを追加すると、新しい項目のレイヤーがひとつ作成され、そこに"Bing Sat"が表示されるようになります。

レイヤーの概念は人によって非常に理解が困難な場合がありますが、例えばそれぞれのレイヤーを、半透明の紙が重なっているようなものだ、と考えるとイメージしやすいのではないかと思います。それぞれの紙には衛星画像やOSMデータなどが表示されており、紙の並び順や、どれを選択するかを自由に変更することができます。

それぞれのレイヤーは "下絵レイヤー"と呼ばれることもあり、地図を作成する際の参照情報として利用されます。例えば衛星画像やGPSの軌跡、Field Papersなどが該当します。あなたが実際に作業を行うレイヤーは、OSMデータレイヤーです。

-   レイヤーの並び順を移動させるにはレイヤーパネルで対象のレイヤーを選択した状態で、上下の矢印ボタンをクリックしてください。

![Layers up down][]

-  　レイヤーの表示/非表示を切り替えるには、マウスで対象のレイヤーを選択した状態で Show/Hideボタンをクリックします。

![Layers show hide][]

-  選択したレイヤーがマップウィンドウに表示されなくなります。もう一度 Show/Hide をクリックすると、再度表示されるようになります。
-  削除ボタンをクリックすると、対象のレイヤーが削除されます。:


![Layers delete][]

-  最後に、JOSMでデータの編集を行うには、対象のレイヤーを選択して *アクティブ* にしておく必要があることを憶えていてください。もしマップウィンドウでデータの編集ができない場合、正しいレイヤーを選択していないことがしばしばあります。GPSポイントやField Papers、衛星画像など、ほとんどのレイヤーはデータの編集を行うことができません。データの編集が可能なのは、OpenStreetMapからデータをダウンロードしたレイヤー(通常、"データレイヤー1")だけです。
-  レイヤーをアクティブにするには、パネルに表示されている対象のレイヤーを選択して、"有効化"のボタンを押してください。:

![Layers activate][]


GPSデータとField Papersの利用
-------------------------------
前章では、GPSロガーとField Papersを使って現地の状況を調査収集し、それらをJOSMで表示するところまでを学習しました。

調査が終わった後は、これらの情報をデータとして、OpenStreetMapへ追加する必要があります。

OpenStreetMapへのデータ追加方法は、以前紹介した方法と同様 - **ダウンロード、編集、保存** - の作業になります。前回との違いは、背景画像レイヤーとして衛星画像だけを使うのではなく、GPSデータやField Papers、現地のノート、それらをすべて参照しながら作業する、ということです。

-   例えば、GPSのウェイポイントデータをJOSMの背景画像として追加することを想定してみましょう。GPSのウェイポイント番号は 030 で、あなたのノートには "030は学校"と書いてあります。OpenStreetMapにこの情報を追加する際には、描画ツールを選択し、マップウィンドウに表示されている030のウェイポイントがある位置をダブルクリックして、ポイントデータを追加します。それから、プリセットメニューを選択し、学校、という項目を探します。項目を選択したら、学校の名前情報を入力し、 "プリセットを適用"をクリックしてください。ラインやシェイプの情報を描く際も同じように作業します。

![GPS in JOSM][]

タグ情報
----
ポイントやライン、シェイプのデータを描くことで、そのデータは位置情報を持ちます。ですが、それだけではその情報がどんな地物を表しているのか、というデータがありません。言い換えると、私たちはその何かの **所在** はわかりますが、 **それが何か** の情報が無いということです。これまでの作業では **プリセット** 機能を使うことでその情報が **何か** を入力してきました。OpenStreetMapにおいて、そのオブジェクトが **何か** をあらわすには、 **タグ** というデータを使います。

タグはいわゆるラベルのように、対象の地物に付け加えることができます。例えば地図上に四角形を描いた場合、そのままではそれは単なる四角形のシェイプにすぎません。しかしそこに、その四角形が何を意味しているか、という属性情報: この四角形は建物、その名前は "Menara Thamrin" 、建物は16階建て、などを付け足してみましょう。

オブジェクトには、必要なだけいくつでもタグを追加することができます。タグ情報は、**キー (key)** と **値 (Value、バリュー)** という一対のテキスト情報として保存されます。OpenStreetMapでは、先ほどの情報は以下のように保存されます。

-   building = yes
-   name = Menara Thamrin
-   building:levels = 16

JOSMで表示されているオブジェクトを選択すると、画面右側のプロパティパネルにそのオブジェクトに付与されたタグの一覧がすべて表示されます。

![Properties panel][]

### タグの編集
プロパティパネルでは、タグの追加、変更、削除が可能です。しかしながら、タグは基本的に英語で書くことになっており、しばしば混乱を招きます。そのため、作業に慣れないうちはタグの入力を行う際、プリセットメニューから入力することをお勧めします。タグを追加したり情報を変更したりすることで、対象のオブジェクトの属性が変化します。

-   オブジェクトのタグを変更するには、まずそのオブジェクトを選択してください。
-   以下の方法のどちらかで、タグを変更します: (1) プリセットメニューを使う (2) 画面右側のプリセットウィンドウから、タグ情報を直接編集する

### よくある間違い: ラインやポリゴンにタグをつけようとしてポイントへタグをつけてしまう
ポイントデータへの属性を編集する場合、まずはそのポイントオブジェクトを選択し、プリセットメニューから、あるいはプロパティパネルから直接タグ情報を追加します。よくある間違いは、ラインやシェイプへタグ情報を追加する際に起きがちです。オブジェクトを選択する時には、対象となるラインそのものを選択する必要があります。ラインを構成しているポイントを選択してはいけません。

JOSMでは特に、地物を範囲選択した場合に発生しがちです。範囲選択を行う際に、ラインと **一緒に** ポイントデータまでいちどに選択してしまうためです。ラインに対してタグ情報を編集する際には、 **対象となるラインだけ** を選択しているかどうかを確認するようにしてください。

![Nodes mistake][]


OSMファイルの保存
----------------
JOSMでデータの編集を行う際は、ダウンロード、編集、アップロードという一連の作業を、あまり長い時間をかけておk縄ないことをお勧めします。あまりないかもしれませんが、例えばデータをダウンロードして、数日間かけて編集してからアップロードする、ということをしたとします。その間に、誰かが同じ地域を編集してアップロードしていた場合、データの競合が発生し、データの間違いの元となります。

怖がらずに、なるべく頻繁にデータをアップロードするようにしてください。こうすることで、あなたの作業がこまめにデータベースへ保存されることになり、せっかくの作業を無駄にせずに済みます。

対象となる地域が比較的狭い場合は、他の人が同じ地域を編集しているかもしれない可能性を考えて、編集作業のたびにデータをダウンロードしなおしておくことをお勧めします。

ただ、なるべく頻繁にデータをアップロードするに越したことはないのですが、状況によってはあなたの編集結果をいったんコンピュータへ保存しておかなくてはならない場合があると思います。例えば、インターネットへの接続が不安定な場合は、いったんデータをダウンロードし、データを保存しておいて、後でアップロードしたい、という場合などです。

-  OSMファイルを保存するには、まずレイヤーパネルから対象のレイヤーを有効化してください。その状態で、画面上部のメニューから "ファイル" を選択し、"保存"をクリックします。ファイルの保存先を選択し、ファイル名を指定します。以下のボタンをクリックすることでも保存が可能です: 

![JOSM save button][]

-  保存が完了したら、JOSMは終了してしまっても問題ありません。同じファイルをもう一度開いて作業を再開したい場合は、JOSMを再度起動させ、"ファイル"メニューから "開く..."の項目を選択して、もう一度対象のファイルを開いてください。

まとめ
-------
この章では、JOSMのより詳しい使い方と、レイヤー、タグの概念について学びました。これで、あなたはOpenStreetMapの編集者として、確かな一歩を踏み出したことになります。

次の章はこのガイダンスの最終章として、これから作業を続ける場合にどのようなサイトを参照すればよいか、質問はどこへ行えばよいか、という内容を扱います。OSMを使って素晴らしい地図を作るには、ここまでに紹介した内容を繰り返し練習するようにしてみてください。

[Layers panel]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image00_layers-panel.png
[Layers up down]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image01_layers-panel-up-down.png
[Layers show hide]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image02_layers-panel-show-hide.png
[Layers delete]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image03_layers-panel-delete.png
[Layers activate]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image04_layers-panel-activate.png
[GPS in JOSM]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image05_gps-layer.png
[Properties panel]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image06_properties-panel.png
[Nodes mistake]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image07_nodes-selected-mistake.png
[JOSM save button]: /images/jp/beginner/07_editing-with-josm/jp_beg_07_editing-with-josm_image08_save-button.png
